{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/YTANNU/Favorites/ai.coach/lib/inngest/client.js"],"sourcesContent":["import { Inngest } from \"inngest\";\r\n\r\nexport const inngest = new Inngest({\r\n    id: \"career-coach\", // Unique app ID\r\n    name: \"Career Coach\",\r\n    credentials: {\r\n        gemini: {\r\n            apiKey: process.env.GEMINI_API_KEY,\r\n        },\r\n    },\r\n});"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,UAAU,IAAI,kJAAA,CAAA,UAAO,CAAC;IAC/B,IAAI;IACJ,MAAM;IACN,aAAa;QACT,QAAQ;YACJ,QAAQ,QAAQ,GAAG,CAAC,cAAc;QACtC;IACJ;AACJ"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/YTANNU/Favorites/ai.coach/lib/prisma.js"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nexport const db = globalThis.prisma || new PrismaClient();\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n    globalThis.prisma = db;\r\n}\r\n\r\n// globalThis.prisma: This global variable ensures that the Prisma client instance is\r\n// reused across hot reloads during development. Without this, each time your application\r\n// reloads, a new instance of the Prisma client would be created, potentially leading\r\n// to connection issues."],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,KAAK,WAAW,MAAM,IAAI,IAAI,6HAAA,CAAA,eAAY;AAEvD,wCAA2C;IACvC,WAAW,MAAM,GAAG;AACxB,EAEA,qFAAqF;CACrF,yFAAyF;CACzF,qFAAqF;CACrF,wBAAwB"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/YTANNU/Favorites/ai.coach/lib/inngest/function.js"],"sourcesContent":["import { db } from \"@/lib/prisma\";\r\nimport { inngest } from \"./client\";\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);\r\nconst model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n\r\nexport const generateIndustryInsights = inngest.createFunction(\r\n    { name: \"Generate Industry Insights\" },\r\n    { cron: \"0 0 * * 0\" }, // Run every Sunday at midnight\r\n    async ({ event, step }) => {\r\n        const industries = await step.run(\"Fetch industries\", async () => {\r\n            return await db.industryInsight.findMany({\r\n                select: { industry: true },\r\n            });\r\n        });\r\n\r\n        for (const { industry } of industries) {\r\n            const prompt = `\r\n          Analyze the current state of the ${industry} industry and provide insights in ONLY the following JSON format without any additional notes or explanations:\r\n          {\r\n            \"salaryRanges\": [\r\n              { \"role\": \"string\", \"min\": number, \"max\": number, \"median\": number, \"location\": \"string\" }\r\n            ],\r\n            \"growthRate\": number,\r\n            \"demandLevel\": \"High\" | \"Medium\" | \"Low\",\r\n            \"topSkills\": [\"skill1\", \"skill2\"],\r\n            \"marketOutlook\": \"Positive\" | \"Neutral\" | \"Negative\",\r\n            \"keyTrends\": [\"trend1\", \"trend2\"],\r\n            \"recommendedSkills\": [\"skill1\", \"skill2\"]\r\n          }\r\n          \r\n          IMPORTANT: Return ONLY the JSON. No additional text, notes, or markdown formatting.\r\n          Include at least 5 common roles for salary ranges.\r\n          Growth rate should be a percentage.\r\n          Include at least 5 skills and trends.\r\n        `;\r\n\r\n            const res = await step.ai.wrap(\r\n                \"gemini\",\r\n                async (p) => {\r\n                    return await model.generateContent(p);\r\n                },\r\n                prompt\r\n            );\r\n\r\n            const text = res.response.candidates[0].content.parts[0].text || \"\";\r\n            const cleanedText = text.replace(/```(?:json)?\\n?/g, \"\").trim();\r\n\r\n            const insights = JSON.parse(cleanedText);\r\n\r\n            await step.run(`Update ${industry} insights`, async () => {\r\n                await db.industryInsight.update({\r\n                    where: { industry },\r\n                    data: {\r\n                        ...insights,\r\n                        lastUpdated: new Date(),\r\n                        nextUpdate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\r\n                    },\r\n                });\r\n            });\r\n        }\r\n    }\r\n);"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAEA,MAAM,QAAQ,IAAI,gKAAA,CAAA,qBAAkB,CAAC,QAAQ,GAAG,CAAC,cAAc;AAC/D,MAAM,QAAQ,MAAM,kBAAkB,CAAC;IAAE,OAAO;AAAmB;AAE5D,MAAM,2BAA2B,0HAAA,CAAA,UAAO,CAAC,cAAc,CAC1D;IAAE,MAAM;AAA6B,GACrC;IAAE,MAAM;AAAY,GACpB,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE;IAClB,MAAM,aAAa,MAAM,KAAK,GAAG,CAAC,oBAAoB;QAClD,OAAO,MAAM,+GAAA,CAAA,KAAE,CAAC,eAAe,CAAC,QAAQ,CAAC;YACrC,QAAQ;gBAAE,UAAU;YAAK;QAC7B;IACJ;IAEA,KAAK,MAAM,EAAE,QAAQ,EAAE,IAAI,WAAY;QACnC,MAAM,SAAS,CAAC;2CACe,EAAE,SAAS;;;;;;;;;;;;;;;;;QAiB9C,CAAC;QAEG,MAAM,MAAM,MAAM,KAAK,EAAE,CAAC,IAAI,CAC1B,UACA,OAAO;YACH,OAAO,MAAM,MAAM,eAAe,CAAC;QACvC,GACA;QAGJ,MAAM,OAAO,IAAI,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,IAAI;QACjE,MAAM,cAAc,KAAK,OAAO,CAAC,oBAAoB,IAAI,IAAI;QAE7D,MAAM,WAAW,KAAK,KAAK,CAAC;QAE5B,MAAM,KAAK,GAAG,CAAC,CAAC,OAAO,EAAE,SAAS,SAAS,CAAC,EAAE;YAC1C,MAAM,+GAAA,CAAA,KAAE,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC5B,OAAO;oBAAE;gBAAS;gBAClB,MAAM;oBACF,GAAG,QAAQ;oBACX,aAAa,IAAI;oBACjB,YAAY,IAAI,KAAK,KAAK,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK;gBACzD;YACJ;QACJ;IACJ;AACJ"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/YTANNU/Favorites/ai.coach/app/api/inngest/route.js"],"sourcesContent":["import { serve } from \"inngest/next\";\r\n\r\nimport { inngest } from \"@/lib/inngest/client\";\r\nimport { generateIndustryInsights } from \"@/lib/inngest/function\";\r\n\r\nexport const { GET, POST, PUT } = serve({\r\n    client: inngest,\r\n    functions: [generateIndustryInsights],\r\n});"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKO,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,QAAK,AAAD,EAAE;IACpC,QAAQ,0HAAA,CAAA,UAAO;IACf,WAAW;QAAC,4HAAA,CAAA,2BAAwB;KAAC;AACzC"}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}