{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/YTANNU/Favorites/ai.coach/action/resume.js"],"sourcesContent":["\"use server\";\r\n\r\nimport { db } from \"@/lib/prisma\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);\r\nconst model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n\r\nexport async function saveResume(content) {\r\n    const { userId } = await auth();\r\n    if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n    const user = await db.user.findUnique({\r\n        where: { clerkUserId: userId },\r\n    });\r\n\r\n    if (!user) throw new Error(\"User not found\");\r\n\r\n    try {\r\n        const resume = await db.resume.upsert({\r\n            where: {\r\n                userId: user.id,\r\n            },\r\n            update: {\r\n                content,\r\n            },\r\n            create: {\r\n                userId: user.id,\r\n                content,\r\n            },\r\n        });\r\n\r\n        revalidatePath(\"/resume\");\r\n        return resume;\r\n    } catch (error) {\r\n        console.error(\"Error saving resume:\", error);\r\n        throw new Error(\"Failed to save resume\");\r\n    }\r\n}\r\n\r\nexport async function getResume() {\r\n    const { userId } = await auth();\r\n    if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n    const user = await db.user.findUnique({\r\n        where: { clerkUserId: userId },\r\n    });\r\n\r\n    if (!user) throw new Error(\"User not found\");\r\n\r\n    return await db.resume.findUnique({\r\n        where: {\r\n            userId: user.id,\r\n        },\r\n    });\r\n}\r\n\r\nexport async function improveWithAI({ current, type }) {\r\n    const { userId } = await auth();\r\n    if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n    const user = await db.user.findUnique({\r\n        where: { clerkUserId: userId },\r\n        include: {\r\n            industryInsight: true,\r\n        },\r\n    });\r\n\r\n    if (!user) throw new Error(\"User not found\");\r\n\r\n    const prompt = `\r\n    As an expert resume writer, improve the following ${type} description for a ${user.industry} professional.\r\n    Make it more impactful, quantifiable, and aligned with industry standards.\r\n    Current content: \"${current}\"\r\n\r\n    Requirements:\r\n    1. Use action verbs\r\n    2. Include metrics and results where possible\r\n    3. Highlight relevant technical skills\r\n    4. Keep it concise but detailed\r\n    5. Focus on achievements over responsibilities\r\n    6. Use industry-specific keywords\r\n    \r\n    Format the response as a single paragraph without any additional text or explanations.\r\n  `;\r\n\r\n    try {\r\n        const result = await model.generateContent(prompt);\r\n        const response = result.response;\r\n        const improvedContent = response.text().trim();\r\n        return improvedContent;\r\n    } catch (error) {\r\n        console.error(\"Error improving content:\", error);\r\n        throw new Error(\"Failed to improve content\");\r\n    }\r\n}"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;AACA;AACA;;;;;;;;AAEA,MAAM,QAAQ,IAAI,oLAAkB,CAAC,QAAQ,GAAG,CAAC,cAAc;AAC/D,MAAM,QAAQ,MAAM,kBAAkB,CAAC;IAAE,OAAO;AAAmB;AAE5D,eAAe,WAAW,OAAO;IACpC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,2LAAI;IAC7B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,mHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QAClC,OAAO;YAAE,aAAa;QAAO;IACjC;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,IAAI;QACA,MAAM,SAAS,MAAM,mHAAE,CAAC,MAAM,CAAC,MAAM,CAAC;YAClC,OAAO;gBACH,QAAQ,KAAK,EAAE;YACnB;YACA,QAAQ;gBACJ;YACJ;YACA,QAAQ;gBACJ,QAAQ,KAAK,EAAE;gBACf;YACJ;QACJ;QAEA,IAAA,+IAAc,EAAC;QACf,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,MAAM,IAAI,MAAM;IACpB;AACJ;AAEO,eAAe;IAClB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,2LAAI;IAC7B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,mHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QAClC,OAAO;YAAE,aAAa;QAAO;IACjC;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,OAAO,MAAM,mHAAE,CAAC,MAAM,CAAC,UAAU,CAAC;QAC9B,OAAO;YACH,QAAQ,KAAK,EAAE;QACnB;IACJ;AACJ;AAEO,eAAe,cAAc,EAAE,OAAO,EAAE,IAAI,EAAE;IACjD,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,2LAAI;IAC7B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,mHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QAClC,OAAO;YAAE,aAAa;QAAO;QAC7B,SAAS;YACL,iBAAiB;QACrB;IACJ;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,SAAS,CAAC;sDACkC,EAAE,KAAK,mBAAmB,EAAE,KAAK,QAAQ,CAAC;;sBAE1E,EAAE,QAAQ;;;;;;;;;;;EAW9B,CAAC;IAEC,IAAI;QACA,MAAM,SAAS,MAAM,MAAM,eAAe,CAAC;QAC3C,MAAM,WAAW,OAAO,QAAQ;QAChC,MAAM,kBAAkB,SAAS,IAAI,GAAG,IAAI;QAC5C,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM;IACpB;AACJ;;;IAvFsB;IAgCA;IAiBA;;AAjDA,+OAAA;AAgCA,+OAAA;AAiBA,+OAAA","debugId":null}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/YTANNU/Favorites/ai.coach/app/%28main%29/resume/_components/resume-builder.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/resume/_components/resume-builder.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/resume/_components/resume-builder.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoT,GACjV,kFACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/YTANNU/Favorites/ai.coach/app/%28main%29/resume/_components/resume-builder.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/resume/_components/resume-builder.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/resume/_components/resume-builder.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAgS,GAC7T,8DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/YTANNU/Favorites/ai.coach/app/%28main%29/resume/page.jsx"],"sourcesContent":["import { getResume } from \"@/action/resume\";\r\nimport ResumeBuilder from \"./_components/resume-builder\";\r\n\r\nexport default async function ResumePage() {\r\n    const resume = await getResume();\r\n\r\n    return (\r\n        <div className=\"container mx-auto py-6\">\r\n            <ResumeBuilder initialContent={resume?.content} />\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,eAAe;IAC1B,MAAM,SAAS,MAAM,IAAA,6HAAS;IAE9B,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC,yKAAa;YAAC,gBAAgB,QAAQ;;;;;;;;;;;AAGnD","debugId":null}}]
}